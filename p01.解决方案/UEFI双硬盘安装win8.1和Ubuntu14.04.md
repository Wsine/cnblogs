# UEFI双硬盘安装win8.1和Ubuntu14.04

----------
## 安装环境
- UEFI启动模式
- 双GPT硬盘
  - 一个ssd
  - 一个hdd
- 笔记本已安装win8.1

硬盘启动顺序为：
U盘
ssd
hdd
光驱

----------
## 安装方法

### 制作U盘启动盘
在Ubuntu官网下载的64位镜像，切记网速不稳定的同学要记得校验md5码。然后用软通碟UltraISO软件刻录U盘启动盘。

### 做好备份
在官网下载分区精灵diskgenius绿色版（免安装直接运行）。备份自己的ESP分区（EFI启动分区），顺便把EFI文件夹复制一份到硬盘，方便后期工作。

### 前期工作
在win8.1下右击计算机 - 管理 - 磁盘管理，选择一个较大的分区，新建卷（建议50G或以上，至少20G，不然用户体验不高），然后删除新的分区。这样子在windows系统下就看不到这个分区了。

### 安装Ubuntu
由于我是装好系统之后才发的教程，所以上不了图了，见谅。

1. 插入U盘，重启电脑，从U盘启动。
2. 选择第二个选项安装系统。（不小心选择了第一项试用系统的可以点击桌面图标进入安装）
3. 选择语言 - 简体中文 - 下一步。笔者英语渣，大神可以随意用英文。
4. 联网 - 建议选择不联网，在线检查时区和更新软件的可以在系统安装完成后弄，没必要现在，严重拖慢安装速度 - 下一步。
5. 选择是否安装第三方软件 - 不联网的话就装不了，这个可以在Ubuntu软件中心自行下载安装 - 下一步。
6. 选择安装方式 - 选择最后一个选项 其他选择 - 下一步。
7. 单击预先准备好的空白分区，点击“ + ” ，分200M作为EFI引导分区，主分区和逻辑分区都行（GPT分区表可以开100多个主分区），从分区起始点开始（下同），然后确定。
8. 点击空白分区，点击“ + ”，分与笔记本内存相等的空间，用作交换空间，确定。例：笔者的笔记本8G内存，就分 8 * 1024 = 8192 M空间。
9. 点击空白分区，点击“ + ”，把剩下的空白分区全部分成Ext4日志文件系统，挂载点选择“ / ”，确定。
10. 这一步最最重要，选择引导目录，直接选择刚才自己分出来的EFI分区，认清楚分区大小200M和分区编号（笔者这里是sdb5，），千万别选错。检查无误后，选择现在安装。
11. 选择时区，中国随便选一个，反正都是东8区，GT + 8，时间都一样，下一步。
12. 设置账号，密码在linux系统中经常要用，所以要牢记，其余按照自己喜欢的填就好，下一步。
13. 然后就没有然后了，等待安装结束自动重启，大约30分钟。

### 后期工作
重启应该是进入U盘启动。你可以选择进入bios设置硬盘启动优先，或者直接拔掉U盘按Ctrl+Alt+Del重启电脑。然后你会发现，你进入了win8.1系统！
**莫慌，进入Ubuntu的方法是，开机进入bios - boot manager - Ubuntu - 选择第一个。**
这样子就进入了Ubuntu系统了，至此安装Ubuntu结束。
这样安装有什么好处呢，就是卸载Ubuntu 的时候方便快捷干净，看下文。

## 卸载Ubuntu
在Windows系统下运行系统自带的磁盘管理或分区精灵diskgenuis软件，看到了之前自己建的三个分区，右击删除卷，咔咔咔，卸载Ubuntu完毕，就是这么干净舒爽。

## 高级篇
很多同学对于进入Ubuntu要先进入bios很不爽，那怎么解决呢，解决方法是安装三叶草引导系统（说是系统其实就是一堆文件）。

#### 认识EFI分区
首先列出EFI分区下的关键文件树

- EFI
	- Boot
		- Bootx64.efi *
	- Microsoft
		- Boot
			- bootmgfw.efi *
			- bootmgr.efi
			- memtest.efi
	- ubuntu
		- grwbx64.efi
		- shimx64..efi *
		- MokManager.efi

电脑启动会找到Bootx64.efi文件启动。
如果校验Bootx64.efi和bootmgfw.efi的md5码的话，会发现两者的校验码是一样的，这样就说明了这是一模两样的两个文件。  
所以说如果删除了Bootx64.efi，复制shimx64.efi到Boot文件夹然后重命名为Bootx64.efi的话，这样开机就会直接进入Ubuntu而不是Windows了。

#### 安装三叶草引导系统
这里需要根据自己电脑写一些启动路径，如何写网上有教程这里就不详细说明了。
你会得到一个这样的文件夹（仅列出关键文件）
- Clover
	- Cloverx64.efi *

所以只要把整个Clover文件夹复制到EFI分区Boot和Microsoft的同级目录下，然后复制Cloverx64.efi替换Bootx64.efi就可以开机启动三叶草引导系统了。

三叶草引导系统可以引导windows，ubuntu，mac os x三种系统，界面可以自己配置，默认界面也很精美。

最后祝大家玩系统愉快啦。